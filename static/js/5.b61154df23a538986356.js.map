{"version":3,"sources":["webpack:///./src/views/Search.vue?9c32","webpack:///./src/views/Search.vue?bf92","webpack:///src/views/Search.vue","webpack:///./src/views/Search.vue?fbb1","webpack:///./src/views/Search.vue","webpack:///./src/libs/utils.js","webpack:///./src/api/index.js","webpack:///./src/api/create-api.js","webpack:///./src/api/axios.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_2_node_modules_less_loader_dist_cjs_js_ref_8_3_node_modules_vue_loader_lib_index_js_vue_loader_options_Search_vue_vue_type_style_index_0_id_73431870_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_searchScoreByName","_storeScore","views_Searchvue_type_script_lang_js_","name","data","searchVal","scoreList","LEVEL_LIST","1","2","3","4","5","created","Object","utils","this","$router","push","methods","numToLevel","num","storeScore","asyncToGenerator_default","regenerator_default","a","mark","_callee","index","e","id","type","params","wrap","_context","prev","next","resource_type","api","sent","meta","code","target","setAttribute","innerHTML","style","backgroundColor","mint_ui_common","t0","console","log","finish","stop","_x","_x2","apply","arguments","focus","document","querySelector","activeElement","searchScoreByName","trim","_callee2","value","_context2","score_king","offset","limit","list","_x3","watch","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","expression","attrs","placeholder","domProps","on","$event","input","composing","_v","_l","item","key","_s","level","artist","_e","click","__webpack_exports__","isTel","phone","test","isCode","setCookie","expiredays","exdate","Date","setTime","Number","cookie","toGMTString","getCookie","length","start","indexOf","end","substring","d","getSmsToken","getSmsCode","bindMobile","searchScore","scoreScore","Resource","require","stringify","post","undefined","scoreName","token","get","concat","headers","TOKEN","settings","axiosIns","timeout","ins","axios","create","defaults","interceptors","request","use","req","error","Promise","reject","response","res","message","getAxios","baseURL","gConf","apiHost","replace","Content-Type"],"mappings":"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","file":"static/js/5.b61154df23a538986356.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../node_modules/less-loader/dist/cjs.js??ref--8-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=73431870&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../node_modules/less-loader/dist/cjs.js??ref--8-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=73431870&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"search-zone\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchVal),expression:\"searchVal\"}],staticClass:\"search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入曲谱名\",\"name\":\"score_name\",\"value\":\"1\"},domProps:{\"value\":(_vm.searchVal)},on:{\"focus\":function($event){return _vm.focus()},\"input\":function($event){if($event.target.composing){ return; }_vm.searchVal=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"search-icon\"})]),_vm._v(\" \"),_c('div',{staticClass:\"search-list\"},[_c('ul',_vm._l((_vm.scoreList),function(item,index){return _c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.type == 1),expression:\"item.type == 1\"}],key:index,staticClass:\"score-item\"},[_c('div',{staticClass:\"up\"},[_c('span',{staticClass:\"score-name\"},[_vm._v(_vm._s(item.name)),_c('span',{staticClass:\"score-level\"},[_vm._v(_vm._s(item.level))])])]),_vm._v(\" \"),_c('div',{staticClass:\"down\"},[(item.artist)?_c('div',{staticClass:\"score-artist\"},[_vm._v(_vm._s(item.artist.name || '未知艺术家'))]):_vm._e(),_vm._v(\" \"),_c('span',{staticClass:\"score-level\"},[_vm._v(_vm._s(_vm.numToLevel(item.level)))]),_vm._v(\" \"),_c('button',{staticClass:\"score-store\",on:{\"click\":function($event){return _vm.storeScore(index, $event)}}},[_vm._v(\"收藏\")])])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"search-zone\">\n      <input class=\"search-input\" type=\"text\" placeholder=\"请输入曲谱名\" name=\"score_name\" v-model=\"searchVal\" value=\"1\" v-on:focus=\"focus()\">\n      <div class=\"search-icon\"></div>\n    </div>\n    <div class=\"search-list\">\n      <ul>\n        <li class=\"score-item\" v-for=\"(item, index) in scoreList\" :key=\"index\" v-show=\"item.type == 1\">\n          <div class=\"up\">\n            <span class=\"score-name\">{{item.name}}<span class=\"score-level\">{{item.level}}</span></span>\n          </div>\n          <div class=\"down\">\n            <div class=\"score-artist\" v-if=\"item.artist\">{{item.artist.name || '未知艺术家'}}</div>\n            <span class=\"score-level\">{{numToLevel(item.level)}}</span>\n            <button class=\"score-store\" @click=\"storeScore(index, $event)\">收藏</button>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n<script>\nimport { searchScore, scoreScore } from 'api'\nimport { Toast } from 'mint-ui'\nimport { getCookie } from '@/libs/utils.js'\n\nexport default {\n  name: 'Search',\n  data () {\n    return {\n      searchVal: '',\n      scoreList: [],\n      LEVEL_LIST: {\n        '1': '新手',\n        '2': '初级',\n        '3': '中级',\n        '4': '高级',\n        '5': '挑战'\n      }\n    }\n  },\n  created () {\n    let cookie = getCookie('TOKEN')\n    if (!cookie) {\n      this.$router.push('/bind')\n    }\n  },\n  methods: {\n    numToLevel (num) {\n      return this.LEVEL_LIST[num]\n    },\n    async storeScore (index, e) {\n      let id = (this.scoreList[index]).id\n      let type = (this.scoreList[index]).type\n      let params = {\n        type: '1',\n        id: id,\n        resource_type: type\n      }\n      try {\n        let res = await scoreScore(params)\n        if (res.data.meta.code === 200) {\n          e.target.setAttribute('disabled', true)\n          e.target.innerHTML = '已收藏'\n          e.target.style.backgroundColor = 'grey'\n          Toast('收藏成功')\n        }\n      } catch (error) {\n        console.log(error)\n      } finally {\n        console.log(e)\n      }\n    },\n    focus () {\n      if (document.querySelector('input') === document.activeElement) {\n        this.searchScoreByName(this.searchVal.trim())\n      }\n    },\n    async searchScoreByName (value) {\n      if (!value) {\n        this.scoreList = []\n      }\n      try {\n        let name = value\n        let params = {\n          type: '1',\n          score_king: '1',\n          offset: '0',\n          limit: '100'\n        }\n        this.scoreList = (await searchScore(name, params)).data.data.list\n      } catch (error) {\n        console.log(error || '报错')\n      }\n    }\n  },\n  watch: {\n    searchVal () {\n      this.scoreList = []\n      this.focus()\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding: 0.51rem 0.5rem 0 0.5rem;\n  .search-zone {\n    position: relative;\n    input::-ms-input-placeholder {\n      text-align: center;\n    }\n    input::-webkit-input-placeholder {\n      text-align: center;\n    }\n    .search-input {\n      border: 1px solid #333;\n      width: 100%;\n      height: 0.8rem;\n      font-size: 0.3rem;\n      padding-left: 0.1rem;\n    }\n    .search-icon {\n      position: absolute;\n      top: 0;\n      right: 0;\n      color: red;\n    }\n  }\n  .search-list {\n    margin-top: 0.3rem;\n    .score-item {\n      display: inline-block;\n      position: relative;\n      overflow: hidden;\n      margin-top: 0.1rem;\n      background: #e1e1e1;\n      height: 100%;\n      line-height: 0.6rem;\n      font-size: 0.3rem;\n      width: 100%;\n      border-radius: 0.08rem;\n      .up {\n        text-align: left;\n        .score-name {\n        word-wrap: break-word;\n        word-break: normal;\n        text-align: left;\n        padding-left: 0.2rem;\n        font-size: 0.24rem;\n        font-weight: bold;\n        }\n      }\n      .down {\n        position: relative;\n        text-align: left;\n        padding-left: 0.2rem;\n        .score-store {\n          position: absolute;\n          right: 0.1rem;\n          top: 0;\n          width: 1.4rem;\n          color: #fff;\n          font-size: 0.24rem;\n          background-color: #407696;\n          border-radius: 0.5rem;\n          height: 0.5rem;\n          line-height: 0.55rem;\n          &.active {\n            background-color: grey;\n          }\n        }\n        .score-artist {\n          margin-top: 0.03rem;\n          font-size: 0.2rem;\n          font-weight: 100;\n          color: #333;\n          float: left;\n          margin-right: 0.2rem;\n        }\n        .score-level {\n          font-size: 0.18rem;\n          font-weight: 100;\n          color: #407696;\n          border: 1px solid #407696;\n          padding: 0 0.1rem;\n          border-radius: 0.6rem;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=73431870&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=73431870&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"73431870\",\n  null\n  \n)\n\nexport default component.exports","export function isTel (phone) {\n  return /^1[3-9]\\d{9}$/g.test(phone)\n}\n\nexport function isCode (code) {\n  return /^\\d{4}$/g.test(code)\n}\n\nexport function setCookie (name, value, expiredays) {\n  let exdate = new Date()\n  exdate.setTime(Number(exdate) + expiredays)\n  document.cookie = name + '=' + value + ((expiredays == null) ? '' : ';expires=' + exdate.toGMTString())\n}\n\nexport function getCookie (name) {\n  if (document.cookie.length > 0) {\n    let start = document.cookie.indexOf(name + '=')\n    if (start !== -1) {\n      start = start + name.length + 1\n      let end = document.cookie.indexOf(';', start)\n      if (end === -1) end = document.cookie.length\n      return document.cookie.substring(start, end)\n    }\n  }\n  return ''\n}\n","const Resource = require('./create-api')\nconst utils = require('../libs/utils')\nconst stringify = require('qs').stringify\nconst { api } = Resource\n\nexport function getSmsToken () {\n  return api.post('/smart-piano/v4/user/sms_token')\n}\n\nexport function getSmsCode (params = {}) {\n  return api.post('/smart-piano/v4/user/send_verification_code', stringify(params))\n}\n\nexport function bindMobile (params = {}) {\n  return api.post('/smart-piano/v4/user/sms_login', stringify(params))\n}\n\nexport function searchScore (scoreName, params = {}) {\n  let token = utils.getCookie('TOKEN')\n  console.log(token)\n  return api.get(`/smart-piano/v4/search/${scoreName}`, {\n    params: params,\n    headers: {\n      'TOKEN': token\n    }\n  })\n}\n\nexport function scoreScore (params = {}) {\n  let token = utils.getCookie('TOKEN')\n  return api.post('/smart-piano/v4/user/favor', stringify(params), {\n    headers: {\n      'TOKEN': token\n    }\n  })\n}\n","import { getAxios } from './axios'\nimport gConf from 'gConf'\n\nexport const api = getAxios({\n  baseURL: gConf.apiHost.replace(/\\/$/, ''),\n  // withCredentials: true,\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  }\n})\n","import axios from 'axios'\n\nexport function getAxios (settings, timeout = 10000) {\n  const ins = axios.create(settings)\n  axios.defaults.timeout = timeout\n  setInterceptors(ins)\n  return ins\n}\n\nfunction setInterceptors (axiosIns) {\n  axiosIns.interceptors.request.use(req => {\n    return req\n  }, error => {\n    console.error(error)\n    return Promise.reject(error)\n  })\n  axiosIns.interceptors.response.use(res => {\n    if (res.data.meta.code >= 200 && res.data.meta.code < 300) {\n      return res\n    }\n    return Promise.reject(res.data)\n  }, error => {\n    return Promise.reject(error.data || (error.response && error.response.data) || {\n      code: 5001,\n      message: 'api error'\n    })\n  })\n}\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/views/Search.vue?45e9","webpack:///./src/views/Search.vue?954b","webpack:///src/views/Search.vue","webpack:///./src/views/Search.vue?fbb1","webpack:///./src/views/Search.vue","webpack:///./src/libs/utils.js","webpack:///./src/api/index.js","webpack:///./src/api/create-api.js","webpack:///./src/api/axios.js"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_8_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_2_node_modules_less_loader_dist_cjs_js_ref_8_3_node_modules_vue_loader_lib_index_js_vue_loader_options_Search_vue_vue_type_style_index_0_id_aaf8e23c_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_searchScoreByName","_storeScore","views_Searchvue_type_script_lang_js_","name","data","searchVal","scoreList","created","Object","utils","this","$router","push","methods","storeScore","asyncToGenerator_default","regenerator_default","a","mark","_callee","index","id","params","wrap","_context","prev","next","type","resource_type","api","sent","meta","code","mint_ui_common","t0","console","log","stop","_x","apply","arguments","focus","document","querySelector","activeElement","searchScoreByName","trim","_callee2","value","_context2","score_king","offset","limit","list","finish","_x2","watch","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","expression","attrs","placeholder","domProps","on","$event","input","target","composing","_v","_l","item","key","_s","click","__webpack_exports__","isTel","phone","test","isCode","setCookie","expiredays","exdate","Date","setTime","Number","cookie","toGMTString","getCookie","length","start","indexOf","end","substring","d","getSmsToken","getSmsCode","bindMobile","searchScore","scoreScore","Resource","require","stringify","post","undefined","scoreName","token","get","concat","headers","TOKEN","settings","axiosIns","timeout","ins","axios","create","defaults","interceptors","request","use","req","error","Promise","reject","response","res","message","getAxios","baseURL","gConf","apiHost","replace","Content-Type"],"mappings":"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","file":"static/js/5.2cc9adc71f1d826d5b57.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../node_modules/less-loader/dist/cjs.js??ref--8-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=aaf8e23c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--8-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-2!../../node_modules/less-loader/dist/cjs.js??ref--8-3!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=aaf8e23c&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"search-zone\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchVal),expression:\"searchVal\"}],staticClass:\"search-input\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入曲谱名\",\"name\":\"score_name\",\"value\":\"1\"},domProps:{\"value\":(_vm.searchVal)},on:{\"focus\":function($event){return _vm.focus()},\"input\":function($event){if($event.target.composing){ return; }_vm.searchVal=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"search-icon\"})]),_vm._v(\" \"),_c('div',{staticClass:\"search-list\"},[_c('ul',_vm._l((_vm.scoreList),function(item,index){return _c('li',{key:index,staticClass:\"score-item\"},[_c('span',{staticClass:\"score-name\"},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('div',{staticClass:\"score-store\",on:{\"click\":function($event){return _vm.storeScore(index)}}},[_vm._v(\"收藏\")])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"search-zone\">\n      <input class=\"search-input\" type=\"text\" placeholder=\"请输入曲谱名\" name=\"score_name\" v-model=\"searchVal\" value=\"1\" v-on:focus=\"focus()\">\n      <div class=\"search-icon\"></div>\n    </div>\n    <!-- <p v-if=\"this.scoreList\">共找到{{}}个结果</p> -->\n    <div class=\"search-list\">\n      <ul>\n        <li class=\"score-item\" v-for=\"(item, index) in scoreList\" :key=\"index\">\n          <span class=\"score-name\">{{item.name}}</span>\n          <div class=\"score-store\" @click=\"storeScore(index)\">收藏</div>\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n<script>\nimport { searchScore, scoreScore } from 'api'\nimport { Toast } from 'mint-ui'\nimport { getCookie } from '@/libs/utils.js'\n\nexport default {\n  name: 'Search',\n  data () {\n    return {\n      searchVal: '',\n      scoreList: []\n    }\n  },\n  created () {\n    let cookie = getCookie('TOKEN')\n    if (!cookie) {\n      this.$router.push('/bind')\n    }\n  },\n  methods: {\n    async storeScore (index) {\n      let id = (this.scoreList[index]).id\n      let params = {\n        type: '1',\n        id: id,\n        resource_type: '1'\n      }\n      try {\n        let res = await scoreScore(params)\n        if (res.data.meta.code === 200) {\n          Toast('收藏成功')\n        }\n      } catch (error) {\n        console.log(error)\n      }\n    },\n    focus () {\n      if (document.querySelector('input') === document.activeElement) {\n        this.searchScoreByName(this.searchVal.trim())\n      }\n    },\n    async searchScoreByName (value) {\n      if (!value) {\n        this.scoreList = []\n      }\n      try {\n        let name = value\n        let params = {\n          type: '1',\n          score_king: '1',\n          offset: '0',\n          limit: '100'\n        }\n        this.scoreList = (await searchScore(name, params)).data.data.list\n        console.log(this.scoreList)\n      } catch (error) {\n        console.log(error || '报错')\n      } finally {\n        console.log(this.scoreList)\n      }\n    }\n  },\n  watch: {\n    searchVal () {\n      this.focus()\n    }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding: 0.51rem 0.5rem 0 0.5rem;\n  .search-zone {\n    position: relative;\n    input::-ms-input-placeholder {\n      text-align: center;\n    }\n    input::-webkit-input-placeholder {\n      text-align: center;\n    }\n    .search-input {\n      border: 1px solid #333;\n      width: 100%;\n      height: 0.8rem;\n      font-size: 0.3rem;\n    }\n    .search-icon {\n      position: absolute;\n      top: 0;\n      right: 0;\n      color: red;\n    }\n  }\n  .search-list {\n    margin-top: 0.3rem;\n    .score-item {\n      position: relative;\n      overflow: hidden;\n      margin-top: 0.1rem;\n      background: yellow;\n      height: 100%;\n      line-height: 0.6rem;\n      font-size: 0.3rem;\n      width: 100%;\n      background-color: #d6d2d2;\n      border-radius: 0.05rem;\n      .score-name {\n        float: left;\n        width: 80%;\n        word-wrap: break-word;\n        word-break: normal;\n      }\n      .score-store {\n        position: absolute;\n        right: 0;\n        width: 20%;\n        line-height: 0.6rem;\n        font-size: 0.3rem;\n        color: #fff;\n        width: 1rem;\n        background-color: orange;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=aaf8e23c&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=aaf8e23c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aaf8e23c\",\n  null\n  \n)\n\nexport default component.exports","export function isTel (phone) {\n  return /^1[3-9]\\d{9}$/g.test(phone)\n}\n\nexport function isCode (code) {\n  return /^\\d{4}$/g.test(code)\n}\n\nexport function setCookie (name, value, expiredays) {\n  let exdate = new Date()\n  exdate.setTime(Number(exdate) + expiredays)\n  document.cookie = name + '=' + value + ((expiredays == null) ? '' : ';expires=' + exdate.toGMTString())\n}\n\nexport function getCookie (name) {\n  if (document.cookie.length > 0) {\n    let start = document.cookie.indexOf(name + '=')\n    if (start !== -1) {\n      start = start + name.length + 1\n      let end = document.cookie.indexOf(';', start)\n      if (end === -1) end = document.cookie.length\n      return document.cookie.substring(start, end)\n    }\n  }\n  return ''\n}\n","const Resource = require('./create-api')\nconst utils = require('../libs/utils')\nconst stringify = require('qs').stringify\nconst { api } = Resource\n\nexport function getSmsToken () {\n  return api.post('/smart-piano/v4/user/sms_token')\n}\n\nexport function getSmsCode (params = {}) {\n  return api.post('/smart-piano/v4/user/send_verification_code', stringify(params))\n}\n\nexport function bindMobile (params = {}) {\n  return api.post('/smart-piano/v4/user/sms_login', stringify(params))\n}\n\nexport function searchScore (scoreName, params = {}) {\n  let token = utils.getCookie('TOKEN')\n  console.log(token)\n  return api.get(`/smart-piano/v4/search/${scoreName}`, {\n    params: params,\n    headers: {\n      'TOKEN': token\n    }\n  })\n}\n\nexport function scoreScore (params = {}) {\n  let token = utils.getCookie('TOKEN')\n  return api.post('/smart-piano/v4/user/favor', stringify(params), {\n    headers: {\n      'TOKEN': token\n    }\n  })\n}\n","import { getAxios } from './axios'\nimport gConf from 'gConf'\n\nexport const api = getAxios({\n  baseURL: gConf.apiHost.replace(/\\/$/, ''),\n  // withCredentials: true,\n  headers: {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  }\n})\n","import axios from 'axios'\n\nexport function getAxios (settings, timeout = 10000) {\n  const ins = axios.create(settings)\n  axios.defaults.timeout = timeout\n  setInterceptors(ins)\n  return ins\n}\n\nfunction setInterceptors (axiosIns) {\n  axiosIns.interceptors.request.use(req => {\n    return req\n  }, error => {\n    console.error(error)\n    return Promise.reject(error)\n  })\n  axiosIns.interceptors.response.use(res => {\n    if (res.data.meta.code >= 200 && res.data.meta.code < 300) {\n      return res\n    }\n    return Promise.reject(res.data)\n  }, error => {\n    return Promise.reject(error.data || (error.response && error.response.data) || {\n      code: 5001,\n      message: 'api error'\n    })\n  })\n}\n"],"sourceRoot":""}